#The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:

#1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...

#Let us list the factors of the first seven triangle numbers:

# 1: 1
# 3: 1,3
# 6: 1,2,3,6
#10: 1,2,5,10
#15: 1,3,5,15
#21: 1,3,7,21
#28: 1,2,4,7,14,28
#We can see that 28 is the first triangle number to have over five divisors.

#What is the value of the first triangle number to have over five hundred divisors?

numdiv = 500
i = numdiv#we will work with the ith triangle number, so i = 7 would be 28. i starts at numdiv because if the ith triangle numbers has numdiv factors then i > numdiv - 1 (-1 because numdiv itself is a factor)
currdiv = 2
until currdiv > numdiv do 
  i += 1
  currdiv = 2#assume 1 and currnum are factors; this program will not work with currnum == 1
  
  case i % 2
  when 0 #i is even
    currnum = (i*i/2 + (i/2))#formula for even triangle numbers
  when 1 #i is odd
    currnum = (i/2 + 1)*i#formula for odd triangle numbers
  end

  j = 2
  
  while j*j < currnum#check how many divisors the ith triangle number has
    if currnum % j == 0 
      currdiv += 2
    end
	j+= 1
  end
  
  if j*j == currnum
    currdiv += 1
  end
   
end

puts("The first triangle number to have more than #{numdiv} divisors is #{currnum}")
